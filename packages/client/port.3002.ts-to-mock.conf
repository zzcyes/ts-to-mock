server {
     #SSL 默认访问端口号为 443
     listen 3001;
     #listen 3001 ssl;
     #请填写绑定证书的域名
     server_name www.zzcyes.com;
     #请填写证书文件的相对路径或绝对路径
     #ssl_certificate ssl/zzcyes.com_bundle.crt;
     #请填写私钥文件的相对路径或绝对路径
     #ssl_certificate_key ssl/zzcyes.com.key;
     #ssl_session_timeout 5m;
     #请按照以下协议配置
     #ssl_protocols TLSv1.2 TLSv1.3;
     #请按照以下套件配置，配置加密套件，写法遵循 openssl 标准。
     #ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;
     #ssl_prefer_server_ciphers on;
     client_max_body_size 1000M;

    # 开启gzip
    gzip on;

    gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript;
    # 启用gzip压缩的最小文件，小于设置值的文件将不会压缩
    gzip_min_length 1k;
    # gzip 压缩级别，1-9，数字越大压缩的越好，也越占用CPU时间
    gzip_comp_level 4;
    # 是否在http header中添加Vary: Accept-Encoding，建议开启
    gzip_vary on;
    # 禁用IE 6 gzip
    gzip_disable "MSIE [1-6]\.";
    # 设置压缩所需要的缓冲区大小
    gzip_buffers 32 4k;
    
    

     # 设置根目录
    root /var/www/github/ts-to-mock/packages/client/dist/;
    index index.html;

     location / {
        try_files $uri $uri/ /index.html;
    }


 # 如果使用 alias 指令
    location /projects/ts-to-mock {
        alias /var/www/github/ts-to-mock/packages/client/dist/;
        try_files $uri $uri/ /projects/ts-to-mock/index.html;
    }

        # 配置json文件下载
        location ~ .*\.(json)$ {
                add_header Content-Disposition: 'attachment';
                add_header Content-type application/octet-stream;
                root /var/www/github/ts-to-mock/packages/client/dist/;
        }   

        #后端服务
        location /api  {
           proxy_pass http://127.0.0.1:3002;
        }

   
    # 其它404、500等页面
    error_page 404 /404.html;

    location = /40x.html {
    }

    error_page 500 502 503 504 /50x.html;

    location = /50x.html {
    }
 }